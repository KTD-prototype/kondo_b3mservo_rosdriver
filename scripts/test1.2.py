#!/usr/bin/env python
# -*- coding: utf-8 -*-
import serial
import time

ser = serial.Serial('/dev/ttyUSB0', 1500000)
time.sleep(1)

#set servo mode to FREE mode
ser.write(0x08,0x04,0x00,0x04,0x02,0x28,0x01,0x37)
print("done1")
time.sleep(0.5)

#set control mode to Pos_control mode
ser.write(0x08,0x04,0x00,0x04,0x02,0x28,0x01,0x37)
print("done2")
time.sleep(0.5)

#set the motion generate type to EVEN
ser.write(0x08,0x04,0x00,0x04,0x01,0x29,0x01,0x37)
print("done3")
time.sleep(0.5)

#set gain
ser.write(0x08,0x04,0x00,0x04,0x00,0x5C,0x01,0x69)
print("done4")
time.sleep(0.5)

#set servo mode to NORMAL mode
ser.write(0x08,0x04,0x00,0x04,0x00,0x28,0x01,0x35)
print("done5")
time.sleep(0.5)

#send SET POSITION command pos:0deg, time:500ms
#ser.write(",00x09,00x06,00x00,00x00,00x00,00x00,00xF4,00x01,00x04")
ser.write(0x09,0x06,0x00,0x04,0x00,0x00,0xF4,0x01,0x04)
time.sleep(1)
print("done 0deg")

#send SET POSITION command pos:45deg, time:500ms
ser.write(0x09,0x06,0x00,0x04,0x94,0x11,0xF4,0x01,0xA9)
time.sleep(1)
print("done 45deg")

#send SET POSITION command pos:0deg, time:500ms
ser.write(0x09,0x06,0x00,0x04,0x00,0x00,0xF4,0x01,0x04)
time.sleep(1)
print("done 0deg")

#send SET POSITION command pos:45deg, time:500ms
ser.write(0x09,0x06,0x00,0x04,0x94,0x11,0xF4,0x01,0xA9)
time.sleep(1)
print("done 45deg")

#set servo mode to FREE mode
ser.write(0x08,0x04,0x00,0x04,0x02,0x28,0x01,0x37)
print("done free mode")
time.sleep(1)

ser.close()
time.sleep(2)
